#!/bin/bash
echo $DOCKER_PASSWORD | docker login -u $DOCKER_USERNAME --password-stdin

docker container run -d --name mongodb -p 27017:27017 -v mongo_data:/data/db mongo

cp requirements.txt api

sudo docker build -t $DOCKERHUB_USERNAME/fastapi:$TRAVIS_BRANCH -f docker/common/Dockerfile ./api

docker container run -d --name fastapi-backend -p 8000:8000 yannicnevhi/fastapi
